<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Primary Meta Tags -->
  <meta name="title" content="SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models">
  <meta name="description" content="A two-step framework for robust safety control in text-to-image models without compromising generation quality, achieving maximum attack success rate of only 5.48%.">
  <meta name="keywords" content="text-to-image, content safety, adversarial defense, diffusion models, stable diffusion, machine learning, computer vision, AI safety">
  <meta name="author" content="Peigui Qi, Kunsheng Tang, Wenbo Zhou, Weiming Zhang, Nenghai Yu, Tianwei Zhang, Qing Guo, Jie Zhang">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="USTC & NTU & A*STAR">
  <meta property="og:title" content="SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models">
  <meta property="og:description" content="A two-step framework for robust safety control in text-to-image models without compromising generation quality.">
  <meta property="og:url" content="https://github.com/pgqihere/safeguider">
  <meta property="og:image" content="static/images/framework.png">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models">
  <meta name="twitter:description" content="A two-step framework for robust safety control in text-to-image models.">
  <meta name="twitter:image" content="static/images/framework.png">

  <!-- Academic/Research Specific -->
  <meta name="citation_title" content="SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models">
  <meta name="citation_author" content="Qi, Peigui">
  <meta name="citation_author" content="Tang, Kunsheng">
  <meta name="citation_author" content="Zhou, Wenbo">
  <meta name="citation_author" content="Zhang, Weiming">
  <meta name="citation_author" content="Yu, Nenghai">
  <meta name="citation_author" content="Zhang, Tianwei">
  <meta name="citation_author" content="Guo, Qing">
  <meta name="citation_author" content="Zhang, Jie">
  <meta name="citation_publication_date" content="2025">
  <meta name="citation_conference_title" content="ACM SIGSAC Conference on Computer and Communications Security (CCS)">
  
  <title>SafeGuider - CCS 2025</title>
  
  <!-- Favicon -->
  <!-- <link rel="icon" type="image/x-icon" href="static/images/favicon.ico"> -->
  
  <!-- CSS -->
  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- JavaScript -->
  <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script defer src="static/js/bulma-carousel.min.js"></script>
  <script defer src="static/js/bulma-slider.min.js"></script>
  <script defer src="static/js/index.js"></script>
  
  <style>
    .author-block a {
      color: #3273dc;
      text-decoration: none;
    }
    .author-block a:hover {
      text-decoration: underline;
    }
    .framework-section {
      padding: 3rem 0;
      background: #f5f5f5;
    }
    .framework-image {
      max-width: 100%;
      height: auto;
      margin: 2rem auto;
      display: block;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    .framework-caption {
      text-align: justify;
      margin-top: 1.5rem;
      line-height: 1.8;
      color: #4a4a4a;
    }
    .observation-box {
      background: #fff;
      border-left: 4px solid #3273dc;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .observation-title {
      font-weight: 600;
      color: #3273dc;
      margin-bottom: 0.5rem;
    }
    .experiment-section {
      margin: 3rem 0;
    }
    .experiment-image {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .comparison-container {
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin: 2rem 0;
    }
    .model-selector {
      margin-bottom: 1rem;
      min-height: 80px;
    }
    .selector-label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #363636;
    }
    .result-display {
      background: #fafafa;
      padding: 2rem;
      border-radius: 8px;
      min-height: 400px;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 3rem 0;
      flex: 1;
      align-items: center;
      justify-content: center;
    }
    .loading-spinner.active {
      display: flex;
      flex-direction: column;
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3273dc;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .result-table {
      overflow-x: auto;
    }
    .result-table table {
      width: 100%;
      background: white;
      border-radius: 4px;
    }
    .result-table th {
      background: #3273dc;
      color: white;
      padding: 0.75rem;
      font-weight: 600;
    }
    .result-table td {
      padding: 0.75rem;
      border-bottom: 1px solid #dbdbdb;
    }
    .best-result {
      font-weight: 700;
      color: #23d160;
    }
    .two-column-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      align-items: start;
    }
    /* Align columns at the top */
    .comparison-container .columns {
      align-items: stretch;
    }
    .comparison-container .column {
      display: flex;
      flex-direction: column;
    }
    @media screen and (max-width: 768px) {
      .two-column-layout {
        grid-template-columns: 1fr;
      }
    }
    .mmd-table {
      width: 100%;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .mmd-table th, .mmd-table td {
      padding: 1rem;
      text-align: center;
      border: 1px solid #dbdbdb;
    }
    .mmd-table th {
      background: #3273dc;
      color: white;
      font-weight: 600;
    }
    .mmd-table tbody tr:hover {
      background: #f5f5f5;
    }
    .example-image {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin: 1rem 0;
    }
    .section-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: #363636;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid #3273dc;
    }
    .result-header {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>

  <!-- Scroll to Top Button -->
  <button class="scroll-to-top" onclick="scrollToTop()" title="Scroll to top" aria-label="Scroll to top">
    <i class="fas fa-chevron-up"></i>
  </button>

  <main id="main-content">
    
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-body">
        <div class="container is-max-desktop">
          <div class="columns is-centered">
            <div class="column has-text-centered">
              <h1 class="title is-1 publication-title">SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models</h1>
              
              <div class="is-size-5 publication-authors">
                <span class="author-block">
                  <a href="mailto:qipeigui@mail.ustc.edu.cn">Peigui Qi</a><sup>1</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:kstang@mail.ustc.edu.cn">Kunsheng Tang</a><sup>1</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:welbeckz@ustc.edu.cn">Wenbo Zhou</a><sup>1*</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:zhangwm@ustc.edu.cn">Weiming Zhang</a><sup>1</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:ynh@ustc.edu.cn">Nenghai Yu</a><sup>1</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:tianwei.zhang@ntu.edu.sg">Tianwei Zhang</a><sup>2</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:guo_qing@cfar.a-star.edu.sg">Qing Guo</a><sup>3</sup>,
                </span>
                <span class="author-block">
                  <a href="mailto:zhangj6@a-star.edu.sg">Jie Zhang</a><sup>3*</sup>
                </span>
              </div>

              <div class="is-size-5 publication-authors">
                <span class="author-block"><sup>1</sup>University of Science and Technology of China, Hefei, China</span><br>
                <span class="author-block"><sup>2</sup>Nanyang Technological University, Singapore</span><br>
                <span class="author-block"><sup>3</sup>CFAR and IHPC, A*STAR, Singapore</span><br>
                <span class="eql-cntrb"><small><sup>*</sup>Corresponding Authors</small></span>
              </div>

              <div class="is-size-5 publication-authors">
                <span class="author-block" style="font-weight: 600; color: #3273dc;">ACM CCS 2025</span>
              </div>

              <div class="column has-text-centered">
                <div class="publication-links">
                  <span class="link-block">
                    <a href="https://arxiv.org/pdf/2510.05173" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                    </span>
                    <span>Paper</span>
                    </a>
                  </span>

                  <span class="link-block">
                    <a href="https://github.com/pgqihere/safeguider" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                    </a>
                  </span>

                  <!-- <span class="link-block">
                    <a href="https://arxiv.org/abs/2501.00000" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="ai ai-arxiv"></i>
                    </span>
                    <span>arXiv</span>
                    </a>
                  </span> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Framework Overview -->
    <section class="framework-section">
      <div class="container is-max-desktop">
        <h2 class="section-title">Framework Overview</h2>
        <img src="static/images/framework.png" alt="SafeGuider Framework" class="framework-image">
        <p class="framework-caption">
          <strong>Overview of SafeGuider.</strong> In Step I, SafeGuider processes input prompts through a text encoder to obtain [EOS] token embeddings for safety assessment. Prompts with safety scores > 0.5 are considered safe and directly forwarded to image generation, while unsafe ones (safety scores ≤ 0.5) are processed by Step II. In Step II, SAFE beam search with beam width K strategically modifies unsafe prompts to obtain safe yet semantically meaningful embeddings for image generation.
        </p>
      </div>
    </section>

    <!-- Abstract -->
    <section class="section hero is-light">
      <div class="container is-max-desktop">
        <div class="columns is-centered has-text-centered">
          <div class="column is-four-fifths">
            <h2 class="title is-3">Abstract</h2>
            <div class="content has-text-justified">
              <p>
                Text-to-image models have shown remarkable capabilities in generating high-quality images from natural language descriptions. However, these models are highly vulnerable to adversarial prompts, which can bypass safety measures and produce harmful content. Despite various defensive strategies, achieving robustness against attacks while maintaining practical utility in real-world applications remains a significant challenge.
              </p>
              <p>
                To address this issue, we first conduct an empirical study of the text encoder in the Stable Diffusion (SD) model, which is a widely used and representative text-to-image model. Our findings reveal that the [EOS] token acts as a semantic aggregator, exhibiting distinct distributional patterns between benign and adversarial prompts in its embedding space. Building on this insight, we introduce <strong>SafeGuider</strong>, a two-step framework designed for robust safety control without compromising generation quality.
              </p>
              <p>
                <strong>SafeGuider</strong> combines an embedding-level recognition model with a safety-aware feature erasure beam search algorithm. This integration enables the framework to maintain high-quality image generation for benign prompts while ensuring robust defense against both in-domain and out-of-domain attacks. <strong>SafeGuider</strong> demonstrates exceptional effectiveness in minimizing attack success rates, achieving a maximum rate of only 5.48% across various attack scenarios.
              </p>
              <p>
                Moreover, instead of refusing to generate or producing black images for unsafe prompts, <strong>SafeGuider</strong> generates safe and meaningful images, enhancing its practical utility. In addition, <strong>SafeGuider</strong> is not limited to the SD model and can be effectively applied to other text-to-image models, such as the Flux model, demonstrating its versatility and adaptability across different architectures.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Empirical Study -->
    <section class="section">
      <div class="container is-max-desktop">
        <h2 class="section-title">Empirical Study</h2>
        
        <!-- Experiment 1 -->
        <div class="experiment-section">
          <h3 class="title is-4">Identifying the Text Condition Feature Aggregation Token</h3>
          <img src="static/images/Sec4.1_EOS.png" alt="EOS Token Analysis" class="experiment-image">
          
          <div class="observation-box">
            <div class="observation-title">Observation 1:</div>
            <p>The [EOS] token serves as a text condition feature aggregator in CLIP's text encoder.</p>
          </div>
          
          <div class="observation-box">
            <div class="observation-title">Observation 2:</div>
            <p>The condition feature aggregation process follows a hierarchical pattern from shallow to deep layers.</p>
          </div>
        </div>

        <!-- Experiment 2 -->
        <div class="experiment-section">
          <h3 class="title is-4">Analyzing Embedding Representations in [EOS] Aggregation Token</h3>
          
          <div class="two-column-layout">
            <div>
              <h4 class="subtitle is-5">Visualization</h4>
              <img src="static/images/Visualization.png" alt="Distribution Visualization" class="experiment-image">
            </div>
            
            <div>
              <h4 class="subtitle is-5">Maximum Mean Discrepancy (MMD)</h4>
              <table class="mmd-table">
                <thead>
                  <tr>
                    <th></th>
                    <th>Benign</th>
                    <th>VS Attacks</th>
                    <th>SJ Attacks</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><strong>Benign</strong></td>
                    <td>0</td>
                    <td>0.496</td>
                    <td>0.993</td>
                  </tr>
                  <tr>
                    <td><strong>VS Attacks</strong></td>
                    <td>0.496</td>
                    <td>0</td>
                    <td>1.000</td>
                  </tr>
                  <tr>
                    <td><strong>SJ Attacks</strong></td>
                    <td>0.993</td>
                    <td>1.000</td>
                    <td>0</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <div class="observation-box">
            <div class="observation-title">Observation 3:</div>
            <p>Prompts within the same category exhibit clear clustering patterns in [EOS] token embedding space.</p>
          </div>
          
          <div class="observation-box">
            <div class="observation-title">Observation 4:</div>
            <p>Prompts across different categories demonstrate significant distributional gaps in [EOS] token embedding space.</p>
          </div>
        </div>

        <!-- Experiment 3 -->
        <div class="experiment-section">
          <h3 class="title is-4">Generalization Across Different Text Encoders</h3>
          <p class="content has-text-justified">
            To investigate the generality of our findings, we extend our analysis to T2I models with different architectures and text encoders. Beyond the CLIP ViT-L/14 encoder in SD-V1.4, we examine models like SD-V2.1, which uses OpenCLIP ViT-H/14, and Flux.1, which employs both CLIP ViT-L/14 and T5-XXL encoders.
          </p>
          
          <div class="observation-box">
            <div class="observation-title">Observation 5:</div>
            <p>The discovered aggregation token patterns generalize across different text encoders and model architectures.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Experimental Results -->
    <section class="section hero is-light">
      <div class="container is-max-desktop">
        <h2 class="section-title">Experimental Results</h2>
        
        <div class="tabs is-centered is-boxed" id="experiment-tabs">
          <ul>
            <li class="is-active" data-tab="rq1-1"><a>Sexually Explicit Content Detection (IND/OOD)</a></li>
            <li data-tab="rq1-2"><a>Other Unsafe Themes Detection (IND/OOD)</a></li>
            <li data-tab="rq2"><a>Generation Quality</a></li>
            <li data-tab="rq3-1"><a>Nudity Removal Rate</a></li>
            <li data-tab="rq3-2"><a>Harmful Content Removal Rate</a></li>
          </ul>
        </div>

        <!-- Two-column layout -->
        <div class="comparison-container" id="two-column-results" style="display: none;">
          <div class="columns">
            <div class="column">
              <div class="model-selector">
                <label class="selector-label">Select Baseline Method:</label>
                <div class="select is-fullwidth">
                  <select id="baseline-selector">
                    <option value="">Choose a method...</option>
                  </select>
                </div>
              </div>
              <div class="result-display" id="baseline-results">
                <p class="has-text-centered has-text-grey">Please select a baseline method to view results</p>
              </div>
            </div>

            <div class="column">
              <div class="model-selector">
                <label class="selector-label">SafeGuider (Ours):</label>
              </div>
              <div class="result-display" id="safeguider-results">
                <div class="loading-spinner active">
                  <div class="spinner"></div>
                  <p>Select an experiment to load SafeGuider results...</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Visual Examples -->
    <section class="section">
      <div class="container is-max-desktop">
        <h2 class="section-title">Visual Comparisons</h2>
        
        <div class="experiment-section">
          <h3 class="title is-4">Comparison of Sexually Explicit Content Mitigation</h3>
          <img src="static/images/sexual_examples.png" alt="Sexual Content Examples" class="example-image">
        </div>

        <div class="experiment-section">
          <h3 class="title is-4">Comparison of Other Unsafe Content Mitigation</h3>
          <img src="static/images/harmful_examples.png" alt="Harmful Content Examples" class="example-image">
        </div>

        <div class="experiment-section">
          <h3 class="title is-4">Comparison of Generation Quality on Benign Prompts</h3>
          <img src="static/images/benign_examples.png" alt="Benign Examples" class="example-image">
        </div>

        <div class="experiment-section">
          <h3 class="title is-4">Cross-Architecture Performance (SD-V2.1 and Flux.1)</h3>
          <img src="static/images/transfer_examples.png" alt="Transfer Examples" class="example-image">
        </div>
      </div>
    </section>

    <!-- BibTeX -->
    <section class="section" id="BibTeX">
      <div class="container is-max-desktop content">
        <div class="bibtex-header">
          <h2 class="title">BibTeX</h2>
          <button class="copy-bibtex-btn button is-small is-link" onclick="copyBibTeX()" title="Copy BibTeX to clipboard">
            <span class="icon">
              <i class="fas fa-copy"></i>
            </span>
            <span class="copy-text">Copy</span>
          </button>
        </div>
        <pre id="bibtex-code"><code>@inproceedings{qi2025safeguider,
  title     = {SafeGuider: Robust and Practical Content Safety Control for Text-to-Image Models},
  author    = {Peigui Qi and Kunsheng Tang and Wenbo Zhou and Weiming Zhang and 
               Nenghai Yu and Tianwei Zhang and Qing Guo and Jie Zhang},
  booktitle = {Proceedings of the 2025 ACM SIGSAC Conference on Computer and
               Communications Security, {CCS} 2025, Taipei, October 13-17, 2025},
  publisher = {ACM},
  year      = {2025},
  url       = {https://doi.org/10.1145/3719027.3744835},
  doi       = {10.1145/3719027.3744835}
}</code></pre>
      </div>
    </section>

  </main>

  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content has-text-centered">
            <p>
              This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a>.
              <br>
              This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Experimental results data
    const experimentalData = {
      'rq1-1': {
        title: 'Sexually Explicit Content Detection (IND/OOD)',
        type: 'two-column',
        metricName: 'ASR ↓',
        baselines: ['openai', 'azure', 'aws', 'nsfw', 'guardt2i', 'safetychecker', 'esd', 'sld-medium', 'sld-max', 'safegen'],
        data: {
          'openai': { 'VS META Sexual': 96.87, 'VS MMA': 30.34, 'VS I2P Sexual': 91.00, 'VS Sneaky': 33.00, 'SJ RAB Sexual': 25.93, 'SJ P4D': 70.18 },
          'azure': { 'VS META Sexual': 83.02, 'VS MMA': 15.45, 'VS I2P Sexual': 82.00, 'VS Sneaky': 19.00, 'SJ RAB Sexual': 2.06, 'SJ P4D': 35.32 },
          'aws': { 'VS META Sexual': 86.00, 'VS MMA': 13.00, 'VS I2P Sexual': 85.00, 'VS Sneaky': 24.00, 'SJ RAB Sexual': 25.00, 'SJ P4D': 63.00 },
          'nsfw': { 'VS META Sexual': 37.88, 'VS MMA': 3.37, 'VS I2P Sexual': 25.00, 'VS Sneaky': 6.67, 'SJ RAB Sexual': 1.65, 'SJ P4D': 14.68 },
          'guardt2i': { 'VS META Sexual': 26.33, 'VS MMA': 17.70, 'VS I2P Sexual': 25.46, 'VS Sneaky': 6.50, 'SJ RAB Sexual': 0.82, 'SJ P4D': 11.01 },
          'safetychecker': { 'VS META Sexual': 64.50, 'VS MMA': 53.09, 'VS I2P Sexual': 40.28, 'VS Sneaky': 35.50, 'SJ RAB Sexual': 7.37, 'SJ P4D': 28.75 },
          'esd': { 'VS META Sexual': 21.38, 'VS MMA': 51.12, 'VS I2P Sexual': 32.44, 'VS Sneaky': 38.50, 'SJ RAB Sexual': 84.77, 'SJ P4D': 77.92 },
          'sld-medium': { 'VS META Sexual': 32.76, 'VS MMA': 90.73, 'VS I2P Sexual': 54.99, 'VS Sneaky': 81.50, 'SJ RAB Sexual': 100.00, 'SJ P4D': 97.08 },
          'sld-max': { 'VS META Sexual': 16.04, 'VS MMA': 84.83, 'VS I2P Sexual': 49.19, 'VS Sneaky': 52.78, 'SJ RAB Sexual': 81.21, 'SJ P4D': 91.25 },
          'safegen': { 'VS META Sexual': 13.99, 'VS MMA': 19.10, 'VS I2P Sexual': 54.14, 'VS Sneaky': 15.00, 'SJ RAB Sexual': 41.02, 'SJ P4D': 70.00 },
          'safeguider': { 'VS META Sexual': 2.05, 'VS MMA': 1.12, 'VS I2P Sexual': 5.48, 'VS Sneaky': 2.78, 'SJ RAB Sexual': 0.01, 'SJ P4D': 0.46 }
        }
      },
      'rq1-2': {
        title: 'Other Unsafe Themes Detection (IND/OOD)',
        type: 'two-column',
        metricName: 'ASR ↓',
        baselines: ['openai', 'azure', 'aws', 'nsfw', 'guardt2i', 'safetychecker', 'sld-medium', 'sld-max'],
        data: {
          'openai': { 'VS META Other': 99.16, 'VS I2P Other': 97.41, 'SJ RAB Other': 82.77 },
          'azure': { 'VS META Other': 78.56, 'VS I2P Other': 85.23, 'SJ RAB Other': 2.73 },
          'aws': { 'VS META Other': 82.00, 'VS I2P Other': 89.00, 'SJ RAB Other': 30.00 },
          'nsfw': { 'VS META Other': 37.00, 'VS I2P Other': 47.71, 'SJ RAB Other': 0.01 },
          'guardt2i': { 'VS META Other': 31.24, 'VS I2P Other': 33.68, 'SJ RAB Other': 2.27 },
          'safetychecker': { 'VS META Other': 49.27, 'VS I2P Other': 20.87, 'SJ RAB Other': 93.64 },
          'sld-medium': { 'VS META Other': 14.33, 'VS I2P Other': 8.54, 'SJ RAB Other': 66.36 },
          'sld-max': { 'VS META Other': 3.36, 'VS I2P Other': 3.02, 'SJ RAB Other': 16.11 },
          'safeguider': { 'VS META Other': 1.34, 'VS I2P Other': 1.40, 'SJ RAB Other': 0.01 }
        }
      },
      'rq2': {
        title: 'Generation Quality',
        type: 'two-column',
        metricName: 'Quality',
        baselines: ['openai', 'azure', 'aws', 'nsfw', 'guardt2i', 'safetychecker', 'esd', 'sld-medium', 'sld-max', 'safegen'],
        data: {
          'openai': { 
            'CCaption-9k GSR': 99.00, 'CCaption-9k CLIP': 27.13, 'CCaption-9k LPIPS': 0.770,
            'COCO2017-2k GSR': 99.00, 'COCO2017-2k CLIP': 28.06, 'COCO2017-2k LPIPS': 0.712
          },
          'azure': { 
            'CCaption-9k GSR': 98.00, 'CCaption-9k CLIP': 26.94, 'CCaption-9k LPIPS': 0.776,
            'COCO2017-2k GSR': 99.85, 'COCO2017-2k CLIP': 28.30, 'COCO2017-2k LPIPS': 0.707
          },
          'aws': { 
            'CCaption-9k GSR': 96.00, 'CCaption-9k CLIP': 26.43, 'CCaption-9k LPIPS': 0.784,
            'COCO2017-2k GSR': 98.75, 'COCO2017-2k CLIP': 28.00, 'COCO2017-2k LPIPS': 0.715
          },
          'nsfw': { 
            'CCaption-9k GSR': 70.60, 'CCaption-9k CLIP': 25.32, 'CCaption-9k LPIPS': 0.803,
            'COCO2017-2k GSR': 64.87, 'COCO2017-2k CLIP': 26.19, 'COCO2017-2k LPIPS': 0.777
          },
          'guardt2i': { 
            'CCaption-9k GSR': 27.17, 'CCaption-9k CLIP': 21.55, 'CCaption-9k LPIPS': 0.887,
            'COCO2017-2k GSR': 52.34, 'COCO2017-2k CLIP': 24.69, 'COCO2017-2k LPIPS': 0.794
          },
          'safetychecker': { 
            'CCaption-9k GSR': 97.68, 'CCaption-9k CLIP': 26.85, 'CCaption-9k LPIPS': 0.779,
            'COCO2017-2k GSR': 99.43, 'COCO2017-2k CLIP': 28.25, 'COCO2017-2k LPIPS': 0.708
          },
          'esd': { 
            'CCaption-9k GSR': 100.00, 'CCaption-9k CLIP': 26.56, 'CCaption-9k LPIPS': 0.776,
            'COCO2017-2k GSR': 100.00, 'COCO2017-2k CLIP': 27.76, 'COCO2017-2k LPIPS': 0.713
          },
          'sld-medium': { 
            'CCaption-9k GSR': 100.00, 'CCaption-9k CLIP': 26.07, 'CCaption-9k LPIPS': 0.781,
            'COCO2017-2k GSR': 100.00, 'COCO2017-2k CLIP': 26.30, 'COCO2017-2k LPIPS': 0.726
          },
          'sld-max': { 
            'CCaption-9k GSR': 100.00, 'CCaption-9k CLIP': 27.36, 'CCaption-9k LPIPS': 0.772,
            'COCO2017-2k GSR': 100.00, 'COCO2017-2k CLIP': 27.28, 'COCO2017-2k LPIPS': 0.720
          },
          'safegen': { 
            'CCaption-9k GSR': 100.00, 'CCaption-9k CLIP': 27.32, 'CCaption-9k LPIPS': 0.777,
            'COCO2017-2k GSR': 100.00, 'COCO2017-2k CLIP': 28.33, 'COCO2017-2k LPIPS': 0.708
          },
          'safeguider': { 
            'CCaption-9k GSR': 100.00, 'CCaption-9k CLIP': 27.50, 'CCaption-9k LPIPS': 0.763,
            'COCO2017-2k GSR': 100.00, 'COCO2017-2k CLIP': 28.41, 'COCO2017-2k LPIPS': 0.708
          }
        }
      },
      'rq3-1': {
        title: 'Nudity Removal Rate',
        type: 'two-column',
        metricName: 'NRR ↑',
        baselines: ['safetychecker', 'esd', 'sld-medium', 'sld-max', 'safegen'],
        data: {
          'safetychecker': { 'VS META Sexual': 78.37, 'VS MMA': 54.63, 'VS I2P Sexual': 81.00, 'VS Sneaky': 77.35, 'SJ RAB Sexual': 73.42, 'SJ P4D': 78.71 },
          'esd': { 'VS META Sexual': 80.34, 'VS MMA': 80.92, 'VS I2P Sexual': 80.99, 'VS Sneaky': 83.60, 'SJ RAB Sexual': 59.01, 'SJ P4D': 58.61 },
          'sld-medium': { 'VS META Sexual': 73.43, 'VS MMA': -4.38, 'VS I2P Sexual': 50.98, 'VS Sneaky': 2.89, 'SJ RAB Sexual': -23.93, 'SJ P4D': -5.23 },
          'sld-max': { 'VS META Sexual': 76.10, 'VS MMA': 28.82, 'VS I2P Sexual': 67.64, 'VS Sneaky': 45.46, 'SJ RAB Sexual': 40.93, 'SJ P4D': 42.51 },
          'safegen': { 'VS META Sexual': 79.03, 'VS MMA': 92.31, 'VS I2P Sexual': 58.58, 'VS Sneaky': 85.62, 'SJ RAB Sexual': 76.81, 'SJ P4D': 73.27 },
          'safeguider': { 'VS META Sexual': 86.61, 'VS MMA': 93.32, 'VS I2P Sexual': 83.33, 'VS Sneaky': 88.52, 'SJ RAB Sexual': 81.71, 'SJ P4D': 82.57 }
        }
      },
      'rq3-2': {
        title: 'Harmful Content Removal Rate',
        type: 'two-column',
        metricName: 'HCRR ↑',
        baselines: ['safetychecker', 'sld-medium', 'sld-max'],
        data: {
          'safetychecker': { 'VS META Other': 0.00, 'VS I2P Other': 15.75, 'SJ RAB Other': 0.00 },
          'sld-medium': { 'VS META Other': 70.04, 'VS I2P Other': 67.32, 'SJ RAB Other': 51.09 },
          'sld-max': { 'VS META Other': 93.94, 'VS I2P Other': 89.61, 'SJ RAB Other': 93.84 },
          'safeguider': { 'VS META Other': 96.22, 'VS I2P Other': 92.98, 'SJ RAB Other': 94.79 }
        }
      }
    };

    // Method name mapping
    const methodNames = {
      'openai': 'OpenAI',
      'azure': 'Azure',
      'aws': 'AWS',
      'nsfw': 'NSFW Text',
      'guardt2i': 'GuardT2I',
      'safetychecker': 'SafetyChecker',
      'esd': 'ESD',
      'sld-medium': 'SLD-Medium',
      'sld-max': 'SLD-Max',
      'safegen': 'SafeGen'
    };

    let currentTab = 'rq1-1';

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      switchTab('rq1-1');
    });

    // Tab switching
    document.querySelectorAll('#experiment-tabs li').forEach(tab => {
      tab.addEventListener('click', function() {
        const tabName = this.dataset.tab;
        switchTab(tabName);
      });
    });

    function switchTab(tabName) {
      currentTab = tabName;
      
      // Update active tab
      document.querySelectorAll('#experiment-tabs li').forEach(t => t.classList.remove('is-active'));
      document.querySelector(`#experiment-tabs li[data-tab="${tabName}"]`).classList.add('is-active');
      
      const experimentData = experimentalData[tabName];
      
      // Show two-column layout
      document.getElementById('two-column-results').style.display = 'block';
      
      // Update baseline selector options
      const selector = document.getElementById('baseline-selector');
      selector.innerHTML = '<option value="">Choose a method...</option>';
      experimentData.baselines.forEach(baseline => {
        const option = document.createElement('option');
        option.value = baseline;
        option.textContent = methodNames[baseline];
        selector.appendChild(option);
      });
      
      // Reset baseline results
      selector.value = '';
      document.getElementById('baseline-results').innerHTML = '<p class="has-text-centered has-text-grey">Please select a baseline method to view results</p>';
      
      // Load SafeGuider results immediately
      loadSafeGuiderResults(tabName);
    }

    function loadSafeGuiderResults(tabName) {
      const safeguiderDiv = document.getElementById('safeguider-results');
      safeguiderDiv.innerHTML = '<div class="loading-spinner active"><div class="spinner"></div><p>Evaluating...</p></div>';
      
      setTimeout(() => {
        const experimentData = experimentalData[tabName];
        safeguiderDiv.innerHTML = generateResultTable('safeguider', experimentData, true);
      }, 1500);
    }

    // Baseline selector
    document.getElementById('baseline-selector').addEventListener('change', function() {
      const method = this.value;
      if (!method) return;
      
      const experimentData = experimentalData[currentTab];
      
      // Show loading for baseline
      const baselineDiv = document.getElementById('baseline-results');
      baselineDiv.innerHTML = '<div class="loading-spinner active"><div class="spinner"></div><p>Evaluating...</p></div>';
      
      // Simulate loading delay
      setTimeout(() => {
        baselineDiv.innerHTML = generateResultTable(method, experimentData, false);
      }, 1500);
    });

    function generateResultTable(method, experimentData, isSafeGuider) {
      const methodName = isSafeGuider ? 'SafeGuider (Ours)' : methodNames[method];
      const data = experimentData.data[method];
      
      let html = '<div class="result-header"><h4 class="subtitle is-5 has-text-centered">' + methodName + '</h4></div>';
      html += '<div class="result-table"><table class="table is-striped is-fullwidth">';
      
      // Generate table based on experiment type
      if (experimentData.title.includes('Generation Quality')) {
        // Quality metrics table
        html += '<thead><tr><th>Dataset</th><th>GSR ↑</th><th>CLIP ↑</th><th>LPIPS ↓</th></tr></thead><tbody>';
        
        ['CCaption-9k', 'COCO2017-2k'].forEach(dataset => {
          const gsr = data[`${dataset} GSR`];
          const clip = data[`${dataset} CLIP`];
          const lpips = data[`${dataset} LPIPS`];
          
          html += `<tr>
            <td><strong>${dataset}</strong></td>
            <td${isSafeGuider && gsr === 100.00 ? ' class="best-result"' : ''}>${gsr.toFixed(2)}</td>
            <td${isSafeGuider ? ' class="best-result"' : ''}>${clip.toFixed(2)}</td>
            <td${isSafeGuider ? ' class="best-result"' : ''}>${lpips.toFixed(3)}</td>
          </tr>`;
        });
      } else {
        // ASR/NRR/HCRR table
        html += `<thead><tr><th>Dataset</th><th>${experimentData.metricName}</th></tr></thead><tbody>`;
        
        Object.keys(data).forEach(key => {
          const value = data[key];
          const isBest = isSafeGuider && (
            (experimentData.metricName.includes('↑') && value > 80) ||
            (experimentData.metricName.includes('↓') && value < 10)
          );
          
          html += `<tr>
            <td><strong>${key.replace(/-/g, ' ')}</strong></td>
            <td${isBest ? ' class="best-result"' : ''}>${value.toFixed(2)}%</td>
          </tr>`;
        });
      }
      
      html += '</tbody></table></div>';
      return html;
    }

    // Copy BibTeX function
    function copyBibTeX() {
      const bibtexCode = document.getElementById('bibtex-code').textContent;
      navigator.clipboard.writeText(bibtexCode).then(() => {
        const btn = document.querySelector('.copy-bibtex-btn .copy-text');
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => {
          btn.textContent = originalText;
        }, 2000);
      });
    }

    // Scroll to top function
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Show/hide scroll button
    window.addEventListener('scroll', function() {
      const scrollBtn = document.querySelector('.scroll-to-top');
      if (window.pageYOffset > 300) {
        scrollBtn.style.display = 'block';
      } else {
        scrollBtn.style.display = 'none';
      }
    });
  </script>

</body>
</html>